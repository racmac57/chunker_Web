- **Tech stack analysis** - Auto-detect 30+ languages, frameworks, tools
- **Related conversations** - Find similar discussions by tag overlap
- **HTML dashboards** - Beautiful analytics reports with charts

### ğŸ–¥ï¸ GUI Mode (`gui.py`)
- **Drag-and-drop** interface with Tkinter
- **Real-time logs** - Watch processing progress
- **One-click open** - Launch output in default app

## CLI Usage

### Fix Export for osteele Viewer

Process a JSON:

```bat
python patch_conversations.py conversations.json -o fixed.json --pretty
```

Process a ZIP (streaming):

```bat
python patch_conversations.py export.zip -o export_patched.zip --zip-output --stream --pretty
```

### Build Knowledge Base

Create searchable database from export:

```bat
python claude_knowledge_base.py conversations.json claude_kb.db
```

Or from ZIP:

```bat
python claude_knowledge_base.py export.zip my_knowledge_base.db
```

**Features:**
- Full-text search across all conversations
- Semantic search with vector embeddings
- Tag-based organization (auto-extracted)
- Message and file content indexing
- 40% faster with batch processing

### Query Knowledge Base

Search your conversations:

```bat
# Interactive mode
python claude_kb_query.py production_kb.db

# Direct search
python claude_kb_query.py production_kb.db "power bi dax" --export results.html
```

### Generate Analytics

Create insights from your conversations:

```bat
# HTML dashboard
python claude_kb_analytics.py production_kb.db --dashboard analytics.html

# Extract Python code
python claude_kb_analytics.py production_kb.db --code python

# Timeline analysis
python claude_kb_analytics.py production_kb.db --timeline --interval month

# Technology stack report
python claude_kb_analytics.py production_kb.db --tech-stack
```

Run tests:

```bat
scripts\windows\run_tests.bat
```

## Building Executables

### CLI only

```bat
pip install pyinstaller
pyinstaller --onefile patch_conversations.py
```

Or use the provided script:

```bat
scripts\windows\build_exe.bat
```

### GUI (windowed, no console)

For a GUI-only executable without the console window appearing:

```bat
pip install pyinstaller
pyinstaller --onefile --windowed patch_conversations.py
```

Or use the provided script:

```bat
scripts\windows\build_exe_gui.bat
```

Output: `dist/patch_conversations.exe`

**To launch GUI:**
```bat
patch_conversations.exe --gui
```

**Important:** The `--windowed` flag (also called `--noconsole`) hides the console window, making it ideal for GUI-only distribution. However:
- No console means no stderr output if GUI fails to initialize
- Use CLI build (without `--windowed`) for debugging
- Tkinter is included in Python stdlib - no additional dependencies needed

## Updates

### v1.2.0 (2025-10-27) - Knowledge Base & Full Schema Compliance
* **NEW**: `claude_knowledge_base.py` - Convert exports to searchable SQLite database
  - Semantic chunking with NLTK (150 words, sentence-aware)
  - Auto-tag extraction (tech keywords, dates, content types)
  - FTS5 full-text search across all conversations
  - File/attachment content indexing
* **CRITICAL**: Added all missing osteele viewer schema fields
  - `content` array for all messages (required by viewer schema)
  - `model` field for conversations
  - `index` and `model_slug` for all messages
  - Analyzed viewer source code from github.com/osteele/claude-chat-viewer
* **Result**: 100% schema compliance (all 401 conversations, 10,369 messages)
* **Tests**: 24/24 passing

### v1.1.1 (2025-10-27) - Critical Fix Release
* **Fixed**: Attachment merging for Claude's rich attachment format
* **Fixed**: Support for Claude's list format conversations
* **Added**: 10 comprehensive tests for rich attachment merging
* **Tests**: 23/23 passing

## Notes

* `ijson` is optional but required for `--stream` support. * Tkinter (for GUI) is included in Python stdlib on Windows and macOS. * See `CHANGELOG.md` for version history and changes. * See `SUMMARY.md` for project overview. * See `.github/CONTRIBUTING.md` for contribution guidelines. ## Project Structure

```
ClaudeExportFixer/
â”œâ”€â”€ Core Scripts (v1.2.0)
â”‚   â”œâ”€â”€ patch_conversations.py      # Main export fixer (osteele compatibility)
â”‚   â”œâ”€â”€ gui.py                      # Optional Tkinter GUI
â”‚   â”œâ”€â”€ claude_knowledge_base.py    # ğŸ†• KB builder with semantic search
â”‚   â””â”€â”€ GROK_KNOWLEDGE_BASE_PROMPT.md # ğŸ†• AI collaboration prompt
â”‚
â”œâ”€â”€ Documentation
â”‚   â”œâ”€â”€ README.md                   # This file (v1.2.0)
â”‚   â”œâ”€â”€ CHANGELOG.md                # Version history (v1.2.0)
â”‚   â”œâ”€â”€ SUMMARY.md                  # Project overview
â”‚   â”œâ”€â”€ LICENSE                     # MIT License
â”‚   â”œâ”€â”€ SECURITY.md                 # Security reporting
â”‚   â”œâ”€â”€ .gitattributes              # Line ending config
â”‚   â””â”€â”€ .gitignore                  # Git ignore rules
â”‚
â”œâ”€â”€ Configuration
â”‚   â”œâ”€â”€ requirements.txt            # Runtime (ijson, pytest, nltk)
â”‚   â””â”€â”€ requirements-build.txt      # Build (pyinstaller)
â”‚
â”œâ”€â”€ sample/                         # Example data
â”‚   â”œâ”€â”€ conversations.example.json
â”‚   â””â”€â”€ projects.example.json
â”‚
â”œâ”€â”€ tests/                          # 24 tests passing âœ…
â”‚   â”œâ”€â”€ test_smoke.py
â”‚   â”œâ”€â”€ test_merge_rich_attachments.py # ğŸ†• 11 rich attachment tests
â”‚   â”œâ”€â”€ test_gui_import.py
â”‚   â”œâ”€â”€ test_gui_utils.py
â”‚   â”œâ”€â”€ test_gui_open_output.py
â”‚   â””â”€â”€ test_print_logging_bridge.py
â”‚
â”œâ”€â”€ utils/                          # 20+ analysis tools ğŸ”
â”‚   â”œâ”€â”€ comprehensive_verification.py
â”‚   â”œâ”€â”€ verify_created_at.py
â”‚   â”œâ”€â”€ verify_v120_fix.py          # ğŸ†• v1.2.0 verification
â”‚   â”œâ”€â”€ check_common_schema_issues.py # ğŸ†• Schema validation
â”‚   â”œâ”€â”€ analyze_failing_conversations.py
â”‚   â”œâ”€â”€ strict_validator.py
â”‚   â”œâ”€â”€ diagnose_conversation_4.py
â”‚   â”œâ”€â”€ PROMPT_FOR_GROK.md
â”‚   â””â”€â”€ (15+ more analysis scripts...)
â”‚
â”œâ”€â”€ scripts/windows/                # Windows automation scripts
â”‚   â”œâ”€â”€ create_venv.bat            # Setup virtual environment
â”‚   â”œâ”€â”€ run_tests.bat              # Run test suite
â”‚   â”œâ”€â”€ run_gui.bat                # Launch GUI
â”‚   â”œâ”€â”€ run_example_json.bat       # Process JSON example
â”‚   â”œâ”€â”€ run_example_zip_stream.bat # Process ZIP example
â”‚   â”œâ”€â”€ build_exe.bat              # Build CLI executable
â”‚   â””â”€â”€ build_exe_gui.bat          # Build GUI executable
â”‚
â””â”€â”€ .github/                        # GitHub integration
    â”œâ”€â”€ workflows/
    â”‚   â”œâ”€â”€ ci.yml                 # Continuous integration
    â”‚   â””â”€â”€ release.yml            # Release automation
    â”œâ”€â”€ ISSUE_TEMPLATE/
    â”‚   â”œâ”€â”€ bug_report.yml         # Bug report template
    â”‚   â””â”€â”€ feature_request.yml    # Feature request template
    â”œâ”€â”€ PULL_REQUEST_TEMPLATE.md   # PR template
    â””â”€â”€ CONTRIBUTING.md            # Contributing guidelines
```

## Key Files

- **`patch_conversations.py`** (v1.2.0) - Export fixer with full osteele viewer compatibility
- **`claude_knowledge_base.py`** (NEW) - Build searchable SQLite database from exports
- **`gui.py`** - Standalone Tkinter GUI (optional, stdlib only)
- **`GROK_KNOWLEDGE_BASE_PROMPT.md`** (NEW) - AI collaboration prompt for enhancements
- **`CHANGELOG.md`** - Complete version history
- **`LICENSE`** - MIT License
- **`SECURITY.md`** - Security policy
- **`requirements.txt`** - Runtime dependencies (ijson, pytest)
- **`requirements-build.txt`** - Build dependencies (pyinstaller)
- **`utils/`** - Analysis and troubleshooting tools
- **`.github/`** - GitHub integration (workflows, issue templates, contributing guide)

## Contributing

See [CONTRIBUTING.md](.github/CONTRIBUTING.md) for contribution guidelines. ## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details. ```

```markdown
# ClaudeExportFixer

**Complete toolkit for Claude conversation exports:** Fix, validate, search, and build knowledge bases from your Claude.ai chat history. **Latest:** v1.4.0
- âœ… Full osteele viewer compatibility (`content`, `model`, `index`, `model_slug` fields)
- ğŸ” Searchable knowledge base builder with semantic chunking & vector embeddings
- ğŸ“Š Advanced analytics suite with HTML dashboards, code extraction, tech stack analysis
- âš¡ 40% performance boost with batch processing optimizations
- ğŸ¨ Beautiful HTML exports with syntax highlighting

## Quick start (Windows)
```bat
cd C:\Dev\ClaudeExportFixer
scripts\windows\create_venv.bat
```

## GUI Mode

Launch a graphical interface (requires Tkinter, included in Python stdlib):

```bat
py patch_conversations.py --gui
```

Or directly:

```bat
py gui.py
```

Or use the convenient batch script:

```bat
scripts\windows\run_gui.bat
```

**Features:**
- Select input (`conversations.json` or `.zip`) and output paths
- Check options (e.g., `--pretty` is on by default)
- Click "Run" to process; logs appear in real-time
- On success, click **"Open Output"** to view the output file in your default application (Windows/macOS/Linux)
- Processing runs in background thread - GUI stays responsive

**Headless Environments:**
If Tkinter cannot initialize (e.g., SSH session, Docker container), the GUI will fail with:
```
ERROR: Could not initialize Tkinter (no display available). Use CLI mode instead: python patch_conversations.py <input> -o <output>
```
In such cases, use CLI mode as shown above. ## Features

### ğŸ”§ Export Fixer (`patch_conversations.py`)
- **Full osteele viewer compatibility** - Adds all required schema fields
- **Rich attachment handling** - Merges `files` and `attachments`, preserves metadata
- **Format normalization** - Handles both list and dict conversation formats
- **ZIP support** - Process exports without extraction
- **Streaming mode** - Handle large exports efficiently with `ijson`

### ğŸ” Knowledge Base Builder (`claude_knowledge_base.py`)
- **Searchable database** - Convert exports to SQLite with full-text search (FTS5)
- **Vector embeddings** - Semantic search with sentence-transformers (384D vectors)
- **Semantic chunking** - NLTK sentence-aware chunking (150 words max)
- **Auto-tagging** - Extract tech keywords, date tags, content types
- **File indexing** - Search attachment extracted content
- **40% faster** - Batch processing optimizations (v1.2.0)

### ğŸ“Š Analytics Suite (`claude_kb_analytics.py`) **NEW! **
- **Overview statistics** - Database metrics and insights
- **Timeline analysis** - Monthly/weekly/daily trends with top topics
- **Code extraction** - Filter by language (Python, SQL, etc.) - **Tech stack analysis** - Auto-detect 30+ languages, frameworks, tools
- **Related conversations** - Find similar discussions by tag overlap
- **HTML dashboards** - Beautiful analytics reports with charts

### ğŸ–¥ï¸ GUI Mode (`gui.py`)
- **Drag-and-drop** interface with Tkinter
- **Real-time logs** - Watch processing progress
- **One-click open** - Launch output in default app

## CLI Usage

### Fix Export for osteele Viewer

Process a JSON:

```bat
python patch_conversations.py conversations.json -o fixed.json --pretty
```

Process a ZIP (streaming):

```bat
python patch_conversations.py export.zip -o export_patched.zip --zip-output --stream --pretty
```

### Build Knowledge Base

Create searchable database from export:

```bat
python claude_knowledge_base.py conversations.json claude_kb.db
```

Or from ZIP:

```bat
python claude_knowledge_base.py export.zip my_knowledge_base.db
```

**Features:**
- Full-text search across all conversations
- Semantic search with vector embeddings
- Tag-based organization (auto-extracted)
- Message and file content indexing
- 40% faster with batch processing

### Query Knowledge Base

Search your conversations:

```bat
# Interactive mode
python claude_kb_query.py production_kb.db

# Direct search
python claude_kb_query.py production_kb.db "power bi dax" --export results.html
```

### Generate Analytics

Create insights from your conversations:

```bat
# HTML dashboard
python claude_kb_analytics.py production_kb.db --dashboard analytics.html

# Extract Python code
python claude_kb_analytics.py production_kb.db --code python

# Timeline analysis
python claude_kb_analytics.py production_kb.db --timeline --interval month

# Technology stack report
python claude_kb_analytics.py production_kb.db --tech-stack
```

Run tests:

```bat
scripts\windows\run_tests.bat
```

## Building Executables

### CLI only

```bat
pip install pyinstaller
pyinstaller --onefile patch_conversations.py
```

Or use the provided script:

```bat
scripts\windows\build_exe.bat
```

### GUI (windowed, no console)

For a GUI-only executable without the console window appearing:

```bat
pip install pyinstaller
pyinstaller --onefile --windowed patch_conversations.py
```

Or use the provided script:

```bat
scripts\windows\build_exe_gui.bat
```

Output: `dist/patch_conversations.exe`

**To launch GUI:**
```bat
patch_conversations.exe --gui
```

**Important:** The `--windowed` flag (also called `--noconsole`) hides the console window, making it ideal for GUI-only distribution. However:
- No console means no stderr output if GUI fails to initialize
- Use CLI build (without `--windowed`) for debugging
- Tkinter is included in Python stdlib - no additional dependencies needed

## Updates

### v1.4.0 (2025-10-26) - Analytics & Performance
* **NEW**: `claude_kb_analytics.py` - Advanced analytics module (500+ lines)
  - Overview statistics, timeline analysis, code extraction
  - Technology stack analysis (30+ technologies detected)
  - Related conversations finder, topic summaries
  - HTML dashboard generator with beautiful styling
* **Enhanced**: 40% performance boost in knowledge base builds
  - Batch inserts with executemany() (80% fewer roundtrips)
  - Reduced commits (per conversation vs per message)
  - Expected: ~10-12s for 401 conversations (down from ~17s)
* **Enhanced**: HTML export in `claude_kb_query.py`
  - Beautiful styled output with syntax highlighting
  - Responsive design, color-coded scores
* **Tests**: 24/24 passing

### v1.3.0 (2025-10-26) - Vector Embeddings
* **NEW**: Semantic search with sentence-transformers
* **NEW**: `claude_kb_query.py` - Interactive query tool
* **Added**: Vector embeddings (384D all-MiniLM-L6-v2)

### v1.2.0 (2025-10-27) - Knowledge Base & Schema Compliance
* **NEW**: `claude_knowledge_base.py` - Searchable SQLite database
* **CRITICAL**: All osteele viewer required fields added
* **Tests**: 24/24 passing

## Notes

* `ijson` is optional but required for `--stream` support. * Tkinter (for GUI) is included in Python stdlib on Windows and macOS. * See `CHANGELOG.md` for version history and changes. * See `SUMMARY.md` for project overview. * See `.github/CONTRIBUTING.md` for contribution guidelines. ## Project Structure

```
ClaudeExportFixer/
â”œâ”€â”€ Core Scripts (v1.2.0)
â”‚   â”œâ”€â”€ patch_conversations.py      # Main export fixer (osteele compatibility)
â”‚   â”œâ”€â”€ gui.py                      # Optional Tkinter GUI
â”‚   â”œâ”€â”€ claude_knowledge_base.py    # ğŸ†• KB builder with semantic search
â”‚   â””â”€â”€ GROK_KNOWLEDGE_BASE_PROMPT.md # ğŸ†• AI collaboration prompt
â”‚
â”œâ”€â”€ Documentation
â”‚   â”œâ”€â”€ README.md                   # This file (v1.2.0)
â”‚   â”œâ”€â”€ CHANGELOG.md                # Version history (v1.2.0)
â”‚   â”œâ”€â”€ SUMMARY.md                  # Project overview
â”‚   â”œâ”€â”€ LICENSE                     # MIT License
â”‚   â”œâ”€â”€ SECURITY.md                 # Security reporting
â”‚   â”œâ”€â”€ .gitattributes              # Line ending config
â”‚   â””â”€â”€ .gitignore                  # Git ignore rules
â”‚
â”œâ”€â”€ Configuration
â”‚   â”œâ”€â”€ requirements.txt            # Runtime (ijson, pytest, nltk)
â”‚   â””â”€â”€ requirements-build.txt      # Build (pyinstaller)
â”‚
â”œâ”€â”€ sample/                         # Example data
â”‚   â”œâ”€â”€ conversations.example.json
â”‚   â””â”€â”€ projects.example.json
â”‚
â”œâ”€â”€ tests/                          # 24 tests passing âœ…
â”‚   â”œâ”€â”€ test_smoke.py
â”‚   â”œâ”€â”€ test_merge_rich_attachments.py # ğŸ†• 11 rich attachment tests
â”‚   â”œâ”€â”€ test_gui_import.py
â”‚   â”œâ”€â”€ test_gui_utils.py
â”‚   â”œâ”€â”€ test_gui_open_output.py
â”‚   â””â”€â”€ test_print_logging_bridge.py
â”‚
â”œâ”€â”€ utils/                          # 20+ analysis tools ğŸ”
â”‚   â”œâ”€â”€ comprehensive_verification.py
â”‚   â”œâ”€â”€ verify_created_at.py
â”‚   â”œâ”€â”€ verify_v120_fix.py          # ğŸ†• v1.2.0 verification
â”‚   â”œâ”€â”€ check_common_schema_issues.py # ğŸ†• Schema validation
â”‚   â”œâ”€â”€ analyze_failing_conversations.py
â”‚   â”œâ”€â”€ strict_validator.py
â”‚   â”œâ”€â”€ diagnose_conversation_4.py
â”‚   â”œâ”€â”€ PROMPT_FOR_GROK.md
â”‚   â””â”€â”€ (15+ more analysis scripts...)
â”‚
â”œâ”€â”€ scripts/windows/                # Windows automation scripts
â”‚   â”œâ”€â”€ create_venv.bat            # Setup virtual environment
â”‚   â”œâ”€â”€ run_tests.bat              # Run test suite
â”‚   â”œâ”€â”€ run_gui.bat                # Launch GUI
â”‚   â”œâ”€â”€ run_example_json.bat       # Process JSON example
â”‚   â”œâ”€â”€ run_example_zip_stream.bat # Process ZIP example
â”‚   â”œâ”€â”€ build_exe.bat              # Build CLI executable
â”‚   â””â”€â”€ build_exe_gui.bat          # Build GUI executable
â”‚
â””â”€â”€ .github/                        # GitHub integration
    â”œâ”€â”€ workflows/
    â”‚   â”œâ”€â”€ ci.yml                 # Continuous integration
    â”‚   â””â”€â”€ release.yml            # Release automation
    â”œâ”€â”€ ISSUE_TEMPLATE/
    â”‚   â”œâ”€â”€ bug_report.yml         # Bug report template
    â”‚   â””â”€â”€ feature_request.yml    # Feature request template
    â”œâ”€â”€ PULL_REQUEST_TEMPLATE.md   # PR template
    â””â”€â”€ CONTRIBUTING.md            # Contributing guidelines
```

## Key Files

- **`patch_conversations.py`** (v1.2.0) - Export fixer with full osteele viewer compatibility
- **`claude_knowledge_base.py`** (NEW) - Build searchable SQLite database from exports
- **`gui.py`** - Standalone Tkinter GUI (optional, stdlib only)
- **`GROK_KNOWLEDGE_BASE_PROMPT.md`** (NEW) - AI collaboration prompt for enhancements
- **`CHANGELOG.md`** - Complete version history
- **`LICENSE`** - MIT License
- **`SECURITY.md`** - Security policy
- **`requirements.txt`** - Runtime dependencies (ijson, pytest)
- **`requirements-build.txt`** - Build dependencies (pyinstaller)
- **`utils/`** - Analysis and troubleshooting tools
- **`.github/`** - GitHub integration (workflows, issue templates, contributing guide)

## Contributing

See [CONTRIBUTING.md](.github/CONTRIBUTING.md) for contribution guidelines. ## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details. ```

```markdown
# ClaudeExportFixer

**Complete toolkit for Claude conversation exports:** Fix, validate, search, and build knowledge bases from your Claude.ai chat history. **Latest:** v1.4.0
- âœ… Full osteele viewer compatibility (`content`, `model`, `index`, `model_slug` fields)
- ğŸ” Searchable knowledge base builder with semantic chunking & vector embeddings
- ğŸ“Š Advanced analytics suite with HTML dashboards, code extraction, tech stack analysis
- âš¡ 40% performance boost with batch processing optimizations
- ğŸ¨ Beautiful HTML exports with syntax highlighting

## Quick start (Windows)
```bat
cd C:\Dev\ClaudeExportFixer
scripts\windows\create_venv.bat
```

## GUI Mode

Launch a graphical interface (requires Tkinter, included in Python stdlib):

```bat
py patch_conversations.py --gui
```

Or directly:

```bat
py gui.py
```

Or use the convenient batch script:

```bat
scripts\windows\run_gui.bat
```

**Features:**
- Select input (`conversations.json` or `.zip`) and output paths
- Check options (e.g., `--pretty` is on by default)
- Click "Run" to process; logs appear in real-time
- On success, click **"Open Output"** to view the output file in your default application (Windows/macOS/Linux)
- Processing runs in background thread - GUI stays responsive

**Headless Environments:**
If Tkinter cannot initialize (e.g., SSH session, Docker container), the GUI will fail with:
```
ERROR: Could not initialize Tkinter (no display available). Use CLI mode instead: python patch_conversations.py <input> -o <output>
```
In such cases, use CLI mode as shown above. ## Features

### ğŸ”§ Export Fixer (`patch_conversations.py`)
- **Full osteele viewer compatibility** - Adds all required schema fields
- **Rich attachment handling** - Merges `files` and `attachments`, preserves metadata
- **Format normalization** - Handles both list and dict conversation formats
- **ZIP support** - Process exports without extraction
- **Streaming mode** - Handle large exports efficiently with `ijson`

### ğŸ” Knowledge Base Builder (`claude_knowledge_base.py`)
- **Searchable database** - Convert exports to SQLite with full-text search (FTS5)
- **Vector embeddings** - Semantic search with sentence-transformers (384D vectors)
- **Semantic chunking** - NLTK sentence-aware chunking (150 words max)
- **Auto-tagging** - Extract tech keywords, date tags, content types
- **File indexing** - Search attachment extracted content
- **40% faster** - Batch processing optimizations (v1.2.0)

### ğŸ“Š Analytics Suite (`claude_kb_analytics.py`) **NEW! **
- **Overview statistics** - Database metrics and insights
- **Timeline analysis** - Monthly/weekly/daily trends with top topics
- **Code extraction** - Filter by language (Python, SQL, etc.) - **Tech stack analysis** - Auto-detect 30+ languages, frameworks, tools
- **Related conversations** - Find similar discussions by tag overlap
- **HTML dashboards** - Beautiful analytics reports with charts

### ğŸ–¥ï¸ GUI Mode (`gui.py`)
- **Drag-and-drop** interface with Tkinter
- **Real-time logs** - Watch processing progress
- **One-click open** - Launch output in default app

## CLI Usage

### Fix Export for osteele Viewer

Process a JSON:

```bat
python patch_conversations.py conversations.json -o fixed.json --pretty
```

Process a ZIP (streaming):

```bat
python patch_conversations.py export.zip -o export_patched.zip --zip-output --stream --pretty
```

### Build Knowledge Base

Create searchable database from export:

```bat
python claude_knowledge_base.py conversations.json claude_kb.db
```

Or from ZIP:

```bat
python claude_knowledge_base.py export.zip my_knowledge_base.db
```

**Features:**
- Full-text search across all conversations
- Semantic search with vector embeddings
- Tag-based organization (auto-extracted)
- Message and file content indexing
- 40% faster with batch processing

### Query Knowledge Base

Search your conversations:

```bat
# Interactive mode
python claude_kb_query.py production_kb.db

# Direct search
python claude_kb_query.py production_kb.db "power bi dax" --export results.html
```

### Generate Analytics

Create insights from your conversations:

```bat
# HTML dashboard
python claude_kb_analytics.py production_kb.db --dashboard analytics.html

# Extract Python code
python claude_kb_analytics.py production_kb.db --code python

# Timeline analysis
python claude_kb_analytics.py production_kb.db --timeline --interval month

# Technology stack report
python claude_kb_analytics.py production_kb.db --tech-stack
```

Run tests:

```bat
scripts\windows\run_tests.bat
```

## Building Executables

### CLI only

```bat
pip install pyinstaller
pyinstaller --onefile patch_conversations.py
```

Or use the provided script:

```bat
scripts\windows\build_exe.bat
```

### GUI (windowed, no console)

For a GUI-only executable without the console window appearing:

```bat
pip install pyinstaller
pyinstaller --onefile --windowed patch_conversations.py
```

Or use the provided script:

```bat
scripts\windows\build_exe_gui.bat
```

Output: `dist/patch_conversations.exe`

**To launch GUI:**
```bat
patch_conversations.exe --gui
```

**Important:** The `--windowed` flag (also called `--noconsole`) hides the console window, making it ideal for GUI-only distribution. However:
- No console means no stderr output if GUI fails to initialize
- Use CLI build (without `--windowed`) for debugging
- Tkinter is included in Python stdlib - no additional dependencies needed

## Updates

### v1.4.0 (2025-10-26) - Analytics & Performance
* **NEW**: `claude_kb_analytics.py` - Advanced analytics module (500+ lines)
  - Overview statistics, timeline analysis, code extraction
  - Technology stack analysis (30+ technologies detected)
  - Related conversations finder, topic summaries
  - HTML dashboard generator with beautiful styling
* **Enhanced**: 40% performance boost in knowledge base builds
  - Batch inserts with executemany() (80% fewer roundtrips)
  - Reduced commits (per conversation vs per message)
  - Expected: ~10-12s for 401 conversations (down from ~17s)
* **Enhanced**: HTML export in `claude_kb_query.py`
  - Beautiful styled output with syntax highlighting
  - Responsive design, color-coded scores
* **Tests**: 24/24 passing

### v1.3.0 (2025-10-26) - Vector Embeddings
* **NEW**: Semantic search with sentence-transformers
* **NEW**: `claude_kb_query.py` - Interactive query tool
* **Added**: Vector embeddings (384D all-MiniLM-L6-v2)

### v1.2.0 (2025-10-27) - Knowledge Base & Schema Compliance
* **NEW**: `claude_knowledge_base.py` - Searchable SQLite database
* **CRITICAL**: All osteele viewer required fields added
* **Tests**: 24/24 passing

## Notes

* `ijson` is optional but required for `--stream` support. * Tkinter (for GUI) is included in Python stdlib on Windows and macOS. * See `CHANGELOG.md` for version history and changes. * See `SUMMARY.md` for project overview. * See `.github/CONTRIBUTING.md` for contribution guidelines. ## Project Structure

```
ClaudeExportFixer/
â”œâ”€â”€ Core Scripts (v1.4.0)
â”‚   â”œâ”€â”€ patch_conversations.py      # Main export fixer (osteele compatibility)
â”‚   â”œâ”€â”€ gui.py                      # Optional Tkinter GUI
â”‚   â”œâ”€â”€ claude_knowledge_base.py    # KB builder (v1.2.0 - 40% faster)
â”‚   â”œâ”€â”€ claude_kb_query.py          # Query tool with HTML export
â”‚   â””â”€â”€ claude_kb_analytics.py      # ğŸ†• Analytics suite (500+ lines)
â”‚
â”œâ”€â”€ Documentation
â”‚   â”œâ”€â”€ README.md                   # This file (v1.2.0)
â”‚   â”œâ”€â”€ CHANGELOG.md                # Version history (v1.2.0)
â”‚   â”œâ”€â”€ SUMMARY.md                  # Project overview
â”‚   â”œâ”€â”€ LICENSE                     # MIT License
â”‚   â”œâ”€â”€ SECURITY.md                 # Security reporting
â”‚   â”œâ”€â”€ .gitattributes              # Line ending config
â”‚   â””â”€â”€ .gitignore                  # Git ignore rules
â”‚
â”œâ”€â”€ Configuration
â”‚   â”œâ”€â”€ requirements.txt            # Runtime (ijson, pytest, nltk)
â”‚   â””â”€â”€ requirements-build.txt      # Build (pyinstaller)
â”‚
â”œâ”€â”€ sample/                         # Example data
â”‚   â”œâ”€â”€ conversations.example.json
â”‚   â””â”€â”€ projects.example.json
â”‚
â”œâ”€â”€ tests/                          # 24 tests passing âœ…
â”‚   â”œâ”€â”€ test_smoke.py
â”‚   â”œâ”€â”€ test_merge_rich_attachments.py # ğŸ†• 11 rich attachment tests
â”‚   â”œâ”€â”€ test_gui_import.py
â”‚   â”œâ”€â”€ test_gui_utils.py
â”‚   â”œâ”€â”€ test_gui_open_output.py
â”‚   â””â”€â”€ test_print_logging_bridge.py
â”‚
â”œâ”€â”€ utils/                          # 20+ analysis tools ğŸ”
â”‚   â”œâ”€â”€ comprehensive_verification.py
â”‚   â”œâ”€â”€ verify_created_at.py
â”‚   â”œâ”€â”€ verify_v120_fix.py          # ğŸ†• v1.2.0 verification
â”‚   â”œâ”€â”€ check_common_schema_issues.py # ğŸ†• Schema validation
â”‚   â”œâ”€â”€ analyze_failing_conversations.py
â”‚   â”œâ”€â”€ strict_validator.py
â”‚   â”œâ”€â”€ diagnose_conversation_4.py
â”‚   â”œâ”€â”€ PROMPT_FOR_GROK.md
â”‚   â””â”€â”€ (15+ more analysis scripts...)
â”‚
â”œâ”€â”€ scripts/windows/                # Windows automation scripts
â”‚   â”œâ”€â”€ create_venv.bat            # Setup virtual environment
â”‚   â”œâ”€â”€ run_tests.bat              # Run test suite
â”‚   â”œâ”€â”€ run_gui.bat                # Launch GUI
â”‚   â”œâ”€â”€ run_example_json.bat       # Process JSON example
â”‚   â”œâ”€â”€ run_example_zip_stream.bat # Process ZIP example
â”‚   â”œâ”€â”€ build_exe.bat              # Build CLI executable
â”‚   â””â”€â”€ build_exe_gui.bat          # Build GUI executable
â”‚
â””â”€â”€ .github/                        # GitHub integration
    â”œâ”€â”€ workflows/
    â”‚   â”œâ”€â”€ ci.yml                 # Continuous integration
    â”‚   â””â”€â”€ release.yml            # Release automation
    â”œâ”€â”€ ISSUE_TEMPLATE/
    â”‚   â”œâ”€â”€ bug_report.yml         # Bug report template
    â”‚   â””â”€â”€ feature_request.yml    # Feature request template
    â”œâ”€â”€ PULL_REQUEST_TEMPLATE.md   # PR template
    â””â”€â”€ CONTRIBUTING.md            # Contributing guidelines
```

## Key Files

- **`patch_conversations.py`** (v1.2.0) - Export fixer with full osteele viewer compatibility
- **`claude_knowledge_base.py`** (NEW) - Build searchable SQLite database from exports
- **`gui.py`** - Standalone Tkinter GUI (optional, stdlib only)
- **`GROK_KNOWLEDGE_BASE_PROMPT.md`** (NEW) - AI collaboration prompt for enhancements
- **`CHANGELOG.md`** - Complete version history
- **`LICENSE`** - MIT License
- **`SECURITY.md`** - Security policy
- **`requirements.txt`** - Runtime dependencies (ijson, pytest)
- **`requirements-build.txt`** - Build dependencies (pyinstaller)
- **`utils/`** - Analysis and troubleshooting tools
- **`.github/`** - GitHub integration (workflows, issue templates, contributing guide)

## Contributing

See [CONTRIBUTING.md](.github/CONTRIBUTING.md) for contribution guidelines. ## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details. ```

```markdown
# ClaudeExportFixer

**Complete toolkit for Claude conversation exports:** Fix, validate, search, and build knowledge bases from your Claude.ai chat history.