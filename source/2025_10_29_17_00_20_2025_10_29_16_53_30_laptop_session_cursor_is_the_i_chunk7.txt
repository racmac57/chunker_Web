```

```markdown
# ClaudeExportFixer

**Complete toolkit for Claude conversation exports:** Fix, validate, search, and build knowledge bases from your Claude.ai chat history. **Latest:** v1.5.2
- üìÅ **NEW: Multi-Format Support** - Process `.md`, `.xlsx`, `.csv`, `.py`, `.txt` files (in addition to `.zip`/`.json`)
- üêï **Watchdog Service** - Automatic file monitoring and processing
- üöÄ **Incremental updates** - 85-90% faster for monthly exports (5-10 min vs 60+ min)
- ‚ôªÔ∏è **Embedding reuse** - Preserves embeddings for unchanged conversations
- ‚úÖ Full osteele viewer compatibility (`content`, `model`, `index`, `model_slug` fields)
- üîç Searchable knowledge base builder with semantic chunking & vector embeddings
- üìä Advanced analytics suite with HTML dashboards, code extraction, tech stack analysis
- ‚ö° 40% performance boost with batch processing optimizations
- üé® Beautiful HTML exports with syntax highlighting

## Quick start (Windows)
```bat
cd C:\Dev\ClaudeExportFixer
scripts\windows\create_venv.bat
```

## üêï Watchdog Service (NEW!) **Automatic file monitoring** - just drop files in `01_input/` and they process automatically:

```bat
# Basic monitoring
python start_watchdog.py

# With knowledge base auto-build (recommended)
python start_watchdog.py --build-kb --incremental

# Background daemon mode
python start_watchdog.py --daemon --build-kb
```

**Features:**
- **True drag-and-drop**: Drop files in `01_input/` folder, they process automatically
- **Background operation**: Runs continuously, processes files as they appear
- **Knowledge base integration**: Optional auto-build with incremental updates
- **Thread-safe**: Handles multiple files simultaneously
- **Real-time feedback**: Shows processing status and results

**Supported Formats:**
- Claude exports: `.zip`, `.json` (full schema fixing)
- Other files: `.md`, `.xlsx`, `.csv`, `.py`, `.txt` (copy with timestamp)

**Workflow:**
1. Start watchdog: `python start_watchdog.py --build-kb --incremental`
2. Drop files in `01_input/` folder (any supported format)
3. Watch them process automatically to `02_output/`
4. Knowledge base updates automatically in `03_knowledge_base/` (for Claude exports)

## GUI Mode

Launch a graphical interface (requires Tkinter, included in Python stdlib):

```bat
py patch_conversations.py --gui
```

Or directly:

```bat
py gui.py
```

Or use the convenient batch script:

```bat
scripts\windows\run_gui.bat
```

**Features:**
- Select input (`conversations.json` or `.zip`) and output paths
- Check options (e.g., `--pretty` is on by default)
- Click "Run" to process; logs appear in real-time
- On success, click **"Open Output"** to view the output file in your default application (Windows/macOS/Linux)
- Processing runs in background thread - GUI stays responsive

**Headless Environments:**
If Tkinter cannot initialize (e.g., SSH session, Docker container), the GUI will fail with:
```
ERROR: Could not initialize Tkinter (no display available). Use CLI mode instead: python patch_conversations.py <input> -o <output>
```
In such cases, use CLI mode as shown above. ## Features

### üîß Export Fixer (`patch_conversations.py`)
- **Full osteele viewer compatibility** - Adds all required schema fields
- **Rich attachment handling** - Merges `files` and `attachments`, preserves metadata
- **Format normalization** - Handles both list and dict conversation formats
- **ZIP support** - Process exports without extraction
- **Streaming mode** - Handle large exports efficiently with `ijson`

### üîç Knowledge Base Builder (`claude_knowledge_base.py`)
- **Searchable database** - Convert exports to SQLite with full-text search (FTS5)
- **Vector embeddings** - Semantic search with sentence-transformers (384D vectors)
- **Semantic chunking** - NLTK sentence-aware chunking (150 words max)
- **Auto-tagging** - Extract tech keywords, date tags, content types
- **File indexing** - Search attachment extracted content
- **40% faster** - Batch processing optimizations (v1.2.0)

### üìä Analytics Suite (`claude_kb_analytics.py`) **NEW! **
- **Overview statistics** - Database metrics and insights
- **Timeline analysis** - Monthly/weekly/daily trends with top topics
- **Code extraction** - Filter by language (Python, SQL, etc.) - **Tech stack analysis** - Auto-detect 30+ languages, frameworks, tools
- **Related conversations** - Find similar discussions by tag overlap
- **HTML dashboards** - Beautiful analytics reports with charts

### üêï Watchdog Service (`start_watchdog.py`) **NEW! **
- **Automatic file monitoring** - Monitors `01_input/` folder continuously
- **Drag-and-drop processing** - Files process automatically when dropped
- **Background operation** - Runs as daemon service
- **Knowledge base integration** - Optional auto-build with incremental updates
- **Thread-safe processing** - Handles multiple files simultaneously
- **Real-time feedback** - Shows processing status and results

### üñ•Ô∏è GUI Mode (`gui.py`)
- **Drag-and-drop** interface with Tkinter
- **Real-time logs** - Watch processing progress
- **One-click open** - Launch output in default app

## CLI Usage

### Incremental Updates (v1.5.0) ‚ö°

**Problem**: Monthly Claude exports take 60+ minutes to process with full rebuilds
**Solution**: Incremental mode processes only new/modified conversations (5-10 minutes)

#### Export Fixer - Incremental Mode

```bash
# First export - full rebuild
python patch_conversations.py export_jan.zip -o fixed.zip

# Later exports - incremental update (90% faster!) python patch_conversations.py export_feb.zip -o fixed.zip --incremental --previous fixed.zip

# Preview changes without processing
python patch_conversations.py export_feb.zip --incremental --previous fixed.zip --dry-run
```

**Benefits**:
- ‚ö° 80-90% faster for typical monthly updates (5-10 new conversations)
- ‚ôªÔ∏è Reuses processed conversations from previous export
- üìä Shows detailed progress: "5 new, 2 modified, 394 reused"

#### Knowledge Base - Incremental Mode

```bash
# Initial build
python claude_knowledge_base.py export_jan.zip my_kb.db

# Later updates - automatically incremental! python claude_knowledge_base.py export_feb.zip my_kb.db

# Preview changes
python claude_knowledge_base.py export_feb.zip my_kb.db --show-changes

# Force full rebuild
python claude_knowledge_base.py export.zip my_kb.db --force-rebuild
```

**Benefits**:
- üöÄ **Reuses embeddings** for unchanged conversations (87-90% time saved)
- ‚è±Ô∏è Typical update: 5-10 minutes instead of 60+ minutes
- üîÑ Auto-detects existing database (incremental by default)
- üìà Progress: "5 new, 2 updated, 394 reused (95% of total)"

**How it works**:
1. **Change detection**: Compares timestamps and content hashes
2. **Smart reuse**: Keeps embeddings/chunks for unchanged conversations
3. **Selective processing**: Only generates embeddings for new/modified content
4. **Safe updates**: Deletes old data before re-processing modified conversations

---

### Fix Export for osteele Viewer

Process a JSON:

```bat
python patch_conversations.py conversations.json -o fixed.json --pretty
```

Process a ZIP (streaming):

```bat
python patch_conversations.py export.zip -o export_patched.zip --zip-output --stream --pretty
```

### Build Knowledge Base

Create searchable database from export:

```bat
python claude_knowledge_base.py conversations.json claude_kb.db
```

Or from ZIP:

```bat
python claude_knowledge_base.py export.zip my_knowledge_base.db
```

**Features:**
- Full-text search across all conversations
- Semantic search with vector embeddings
- Tag-based organization (auto-extracted)
- Message and file content indexing
- 40% faster with batch processing

### Query Knowledge Base

Search your conversations:

```bat
# Interactive mode
python claude_kb_query.py production_kb.db

# Direct search
python claude_kb_query.py production_kb.db "power bi dax" --export results.html
```

### Generate Analytics

Create insights from your conversations:

```bat
# HTML dashboard
python claude_kb_analytics.py production_kb.db --dashboard analytics.html

# Extract Python code
python claude_kb_analytics.py production_kb.db --code python

# Timeline analysis
python claude_kb_analytics.py production_kb.db --timeline --interval month

# Technology stack report
python claude_kb_analytics.py production_kb.db --tech-stack
```

Run tests:

```bat
scripts\windows\run_tests.bat
```

## Building Executables

### CLI only

```bat
pip install pyinstaller
pyinstaller --onefile patch_conversations.py
```

Or use the provided script:

```bat
scripts\windows\build_exe.bat
```

### GUI (windowed, no console)

For a GUI-only executable without the console window appearing:

```bat
pip install pyinstaller
pyinstaller --onefile --windowed patch_conversations.py
```

Or use the provided script:

```bat
scripts\windows\build_exe_gui.bat
```

Output: `dist/patch_conversations.exe`

**To launch GUI:**
```bat
patch_conversations.exe --gui
```

**Important:** The `--windowed` flag (also called `--noconsole`) hides the console window, making it ideal for GUI-only distribution. However:
- No console means no stderr output if GUI fails to initialize
- Use CLI build (without `--windowed`) for debugging
- Tkinter is included in Python stdlib - no additional dependencies needed

## Updates

### v1.5.1 (2025-10-28) - Watchdog Service
* **NEW**: `start_watchdog.py` - Automatic file monitoring service
  - Monitors `01_input/` folder continuously
  - Processes files automatically when dropped
  - Optional knowledge base auto-build with incremental updates
  - Background daemon mode support
  - Thread-safe processing for multiple files
* **Enhanced**: `requirements.txt` - Added `watchdog>=2.1.0` dependency
* **Enhanced**: `01_input/README.md` - Updated with watchdog instructions
* **Added**: `scripts/windows/start_watchdog.bat` - Easy launcher
* **Workflow**: True drag-and-drop automation - just drop files and they process! ### v1.4.0 (2025-10-26) - Analytics & Performance
* **NEW**: `claude_kb_analytics.py` - Advanced analytics module (500+ lines)
  - Overview statistics, timeline analysis, code extraction
  - Technology stack analysis (30+ technologies detected)
  - Related conversations finder, topic summaries
  - HTML dashboard generator with beautiful styling
* **Enhanced**: 40% performance boost in knowledge base builds
  - Batch inserts with executemany() (80% fewer roundtrips)
  - Reduced commits (per conversation vs per message)
  - Expected: ~10-12s for 401 conversations (down from ~17s)
* **Enhanced**: HTML export in `claude_kb_query.py`
  - Beautiful styled output with syntax highlighting
  - Responsive design, color-coded scores
* **Tests**: 24/24 passing

### v1.3.0 (2025-10-26) - Vector Embeddings
* **NEW**: Semantic search with sentence-transformers
* **NEW**: `claude_kb_query.py` - Interactive query tool
* **Added**: Vector embeddings (384D all-MiniLM-L6-v2)

### v1.2.0 (2025-10-27) - Knowledge Base & Schema Compliance
* **NEW**: `claude_knowledge_base.py` - Searchable SQLite database
* **CRITICAL**: All osteele viewer required fields added
* **Tests**: 24/24 passing

## Notes

* `ijson` is optional but required for `--stream` support. * Tkinter (for GUI) is included in Python stdlib on Windows and macOS. * See `CHANGELOG.md` for version history and changes. * See `SUMMARY.md` for project overview. * See `.github/CONTRIBUTING.md` for contribution guidelines. ## Project Structure

```
ClaudeExportFixer/
‚îú‚îÄ‚îÄ Core Scripts (v1.5.1)
‚îÇ   ‚îú‚îÄ‚îÄ patch_conversations.py      # Main export fixer (osteele compatibility)
‚îÇ   ‚îú‚îÄ‚îÄ start_watchdog.py           # üÜï Automatic file monitoring service
‚îÇ   ‚îú‚îÄ‚îÄ gui.py                      # Optional Tkinter GUI
‚îÇ   ‚îú‚îÄ‚îÄ claude_knowledge_base.py    # KB builder (v1.2.0 - 40% faster)
‚îÇ   ‚îú‚îÄ‚îÄ claude_kb_query.py          # Query tool with HTML export
‚îÇ   ‚îî‚îÄ‚îÄ claude_kb_analytics.py      # Analytics suite (500+ lines)
‚îÇ
‚îú‚îÄ‚îÄ Documentation
‚îÇ   ‚îú‚îÄ‚îÄ README.md                   # This file (v1.2.0)
‚îÇ   ‚îú‚îÄ‚îÄ CHANGELOG.md                # Version history (v1.2.0)
‚îÇ   ‚îú‚îÄ‚îÄ SUMMARY.md                  # Project overview
‚îÇ   ‚îú‚îÄ‚îÄ LICENSE                     # MIT License
‚îÇ   ‚îú‚îÄ‚îÄ SECURITY.md                 # Security reporting
‚îÇ   ‚îú‚îÄ‚îÄ .gitattributes              # Line ending config
‚îÇ   ‚îî‚îÄ‚îÄ .gitignore                  # Git ignore rules
‚îÇ
‚îú‚îÄ‚îÄ Configuration
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt            # Runtime (ijson, pytest, nltk)
‚îÇ   ‚îî‚îÄ‚îÄ requirements-build.txt      # Build (pyinstaller)
‚îÇ
‚îú‚îÄ‚îÄ sample/                         # Example data
‚îÇ   ‚îú‚îÄ‚îÄ conversations.example.json
‚îÇ   ‚îî‚îÄ‚îÄ projects.example.json
‚îÇ
‚îú‚îÄ‚îÄ tests/                          # 24 tests passing ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ test_smoke.py
‚îÇ   ‚îú‚îÄ‚îÄ test_merge_rich_attachments.py # üÜï 11 rich attachment tests
‚îÇ   ‚îú‚îÄ‚îÄ test_gui_import.py
‚îÇ   ‚îú‚îÄ‚îÄ test_gui_utils.py
‚îÇ   ‚îú‚îÄ‚îÄ test_gui_open_output.py
‚îÇ   ‚îî‚îÄ‚îÄ test_print_logging_bridge.py
‚îÇ
‚îú‚îÄ‚îÄ utils/                          # 20+ analysis tools üîç
‚îÇ   ‚îú‚îÄ‚îÄ comprehensive_verification.py
‚îÇ   ‚îú‚îÄ‚îÄ verify_created_at.py
‚îÇ   ‚îú‚îÄ‚îÄ verify_v120_fix.py          # üÜï v1.2.0 verification
‚îÇ   ‚îú‚îÄ‚îÄ check_common_schema_issues.py # üÜï Schema validation
‚îÇ   ‚îú‚îÄ‚îÄ analyze_failing_conversations.py
‚îÇ   ‚îú‚îÄ‚îÄ strict_validator.py
‚îÇ   ‚îú‚îÄ‚îÄ diagnose_conversation_4.py
‚îÇ   ‚îú‚îÄ‚îÄ PROMPT_FOR_GROK.md
‚îÇ   ‚îî‚îÄ‚îÄ (15+ more analysis scripts...)
‚îÇ
‚îú‚îÄ‚îÄ scripts/windows/                # Windows automation scripts
‚îÇ   ‚îú‚îÄ‚îÄ create_venv.bat            # Setup virtual environment
‚îÇ   ‚îú‚îÄ‚îÄ start_watchdog.bat         # üÜï Launch watchdog service
‚îÇ   ‚îú‚îÄ‚îÄ process_workflow.bat       # Batch process files
‚îÇ   ‚îú‚îÄ‚îÄ run_tests.bat              # Run test suite
‚îÇ   ‚îú‚îÄ‚îÄ run_gui.bat                # Launch GUI
‚îÇ   ‚îú‚îÄ‚îÄ run_example_json.bat       # Process JSON example
‚îÇ   ‚îú‚îÄ‚îÄ run_example_zip_stream.bat # Process ZIP example
‚îÇ   ‚îú‚îÄ‚îÄ build_exe.bat              # Build CLI executable
‚îÇ   ‚îî‚îÄ‚îÄ build_exe_gui.bat          # Build GUI executable
‚îÇ
‚îî‚îÄ‚îÄ .github/                        # GitHub integration
    ‚îú‚îÄ‚îÄ workflows/
    ‚îÇ   ‚îú‚îÄ‚îÄ ci.yml                 # Continuous integration
    ‚îÇ   ‚îî‚îÄ‚îÄ release.yml            # Release automation
    ‚îú‚îÄ‚îÄ ISSUE_TEMPLATE/
    ‚îÇ   ‚îú‚îÄ‚îÄ bug_report.yml         # Bug report template
    ‚îÇ   ‚îî‚îÄ‚îÄ feature_request.yml    # Feature request template
    ‚îú‚îÄ‚îÄ PULL_REQUEST_TEMPLATE.md   # PR template
    ‚îî‚îÄ‚îÄ CONTRIBUTING.md            # Contributing guidelines
```

## Key Files

- **`patch_conversations.py`** (v1.2.2) - Export fixer with full osteele viewer compatibility
- **`claude_knowledge_base.py`** (v1.2.0) - Build searchable SQLite database (40% faster)
- **`claude_kb_query.py`** (v1.1.0) - Query tool with semantic/keyword/hybrid search
- **`claude_kb_analytics.py`** (v1.0.0) - Analytics suite with HTML dashboards **NEW! **
- **`gui.py`** - Standalone Tkinter GUI (optional, stdlib only)
- **`CHANGELOG.md`** - Complete version history
- **`LICENSE`** - MIT License
- **`SECURITY.md`** - Security policy
- **`requirements.txt`** - Runtime dependencies (ijson, pytest, nltk, sentence-transformers)
- **`requirements-build.txt`** - Build dependencies (pyinstaller)
- **`utils/`** - Analysis and troubleshooting tools
- **`.github/`** - GitHub integration (workflows, issue templates, contributing guide)

## Contributing

See [CONTRIBUTING.md](.github/CONTRIBUTING.md) for contribution guidelines. ## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details. ```

Now let me update the SUMMARY:

```markdown
# Project Summary

## ClaudeExportFixer v1.5.2

### Purpose
**Complete toolkit for Claude conversation exports:** Fix, validate, search, and build knowledge bases from Claude.ai chat history. Ensures full compatibility with the osteele chat viewer while providing advanced analytics, semantic search, HTML dashboards, **incremental updates** (87-90% time savings), **automatic file monitoring**, and **multi-format processing** (`.md`, `.xlsx`, `.csv`, `.py`, `.txt`) for daily Power BI, Python, and ArcGIS workflows. ### Core Components

#### 1. Export Fixer (`patch_conversations.py`)
Normalizes Claude exports for osteele viewer compatibility:
- **Schema Compliance**: Adds all required fields (`content`, `model`, `index`, `model_slug`)
- **Rich Attachments**: Merges and preserves file metadata with `extracted_content`
- **Format Support**: Handles both list and dict conversation formats
- **ZIP Processing**: Streaming support for large exports with `ijson`
- **GUI Mode**: Optional Tkinter interface (`--gui` flag)

#### 2. Knowledge Base Builder (`claude_knowledge_base.py`)
Converts exports to searchable SQLite database:
- **Semantic Chunking**: NLTK sentence-aware chunking (150 words max)
- **Vector Embeddings**: 384D semantic search (sentence-transformers)
- **Auto-Tagging**: Tech keywords, date-based, content-type tags
- **Full-Text Search**: FTS5 indexing across all conversations
- **File Indexing**: Attachment `extracted_content` searchable
- **40% Performance Boost**: Batch processing optimizations (v1.2.0)

#### 3. Query Tool (`claude_kb_query.py`)
Interactive and CLI search interface:
- **Three Search Modes**: Keyword (FTS5), Semantic (vector), Hybrid (combined)
- **Tag & Date Filters**: Refine searches by metadata
- **Context Viewer**: Show surrounding messages
- **Export Formats**: Markdown, JSON, CSV, HTML
- **Beautiful HTML**: Syntax highlighting, responsive design

#### 4. Analytics Suite (`claude_kb_analytics.py`) **NEW! **
Advanced analytics and insights:
- **Overview Statistics**: Database metrics, conversation counts
- **Timeline Analysis**: Monthly/weekly/daily trends with top topics
- **Code Extraction**: Filter by language, minimum line counts
- **Tech Stack Analysis**: Auto-detect 30+ technologies
- **Related Conversations**: Tag-based similarity recommendations
- **HTML Dashboards**: Beautiful analytics reports with charts

#### 5. Watchdog Service (`start_watchdog.py`) **NEW! **
Automatic file monitoring and processing:
- **Continuous Monitoring**: Watches `01_input/` folder for new files
- **Automatic Processing**: Processes files as soon as they're dropped
- **Background Operation**: Runs as daemon service
- **Knowledge Base Integration**: Optional auto-build with incremental updates
- **Thread-Safe**: Handles multiple files simultaneously
- **Real-Time Feedback**: Shows processing status and results

### Technology Stack
- **Language**: Python 3.13+
- **Core Dependencies**:
  - `ijson` (‚â•3.2) - Streaming JSON parser
  - `pytest` (‚â•8.4) - Testing framework
  - `nltk` (‚â•3.8) - Sentence tokenization for chunking
  - `sentence-transformers` (‚â•2.2.0) - Vector embeddings for semantic search
  - `numpy` (‚â•1.24.0) - Similarity calculations
  - `watchdog` (‚â•2.1.0) - File system monitoring for automatic processing
- **Optional**:
  - `pyinstaller` (‚â•6.0) - Build executables

### Key Features

#### Export Processing
- ‚úÖ Full osteele viewer schema compliance (analyzed from viewer source code)
- ‚úÖ Rich attachment handling with metadata preservation
- ‚úÖ Both top-level list `[...]` and dict `{"conversations": [...]}` formats
- ‚úÖ Streaming mode for 1000+ conversation exports
- ‚úÖ Projects.json linking support
- ‚úÖ Pretty-printed JSON output

#### Knowledge Base
- üîç Semantic text chunking (sentence-aware, configurable size)
- ü§ñ Vector embeddings with sentence-transformers (384D all-MiniLM-L6-v2)
- üè∑Ô∏è Automatic tag extraction (30+ tech keywords, date tags, content analysis)
- üìä Full-text search with SQLite FTS5
- üìÅ File/attachment content indexing
- ‚ö° 40% performance boost with batch processing
- üéØ Integration with C:\_chunker enterprise chunking logic

#### Analytics
- üìà Timeline analysis (monthly/weekly/daily trends)
- üíª Code extraction by language (Python, SQL, JavaScript, etc.) - üîß Technology stack analysis (30+ detected technologies)
- üîó Related conversation finder (tag-based similarity)
- üìä Topic deep-dive with sample messages
- üé® HTML dashboard generator (beautiful charts & stats)

#### GUI & Automation
- üñ•Ô∏è Optional Tkinter GUI (stdlib only, no deps)
- üêï **Watchdog Service** - Automatic file monitoring and processing
- ‚ö° Windows batch scripts for all common tasks
- üèóÔ∏è PyInstaller support for standalone .exe builds
- üîî Real-time processing logs

### Project Structure
```
ClaudeExportFixer/ (v1.5.1)
‚îú‚îÄ‚îÄ Core Scripts
‚îÇ   ‚îú‚îÄ‚îÄ patch_conversations.py (650 lines) - Main export fixer
‚îÇ   ‚îú‚îÄ‚îÄ start_watchdog.py (200+ lines) - üÜï Automatic file monitoring
‚îÇ   ‚îú‚îÄ‚îÄ claude_knowledge_base.py (460 lines) - KB builder (v1.2.0)
‚îÇ   ‚îú‚îÄ‚îÄ claude_kb_query.py (580 lines) - Query tool with HTML export
‚îÇ   ‚îú‚îÄ‚îÄ claude_kb_analytics.py (500+ lines) - Analytics suite
‚îÇ   ‚îî‚îÄ‚îÄ gui.py (620 lines) - Optional Tkinter interface
‚îÇ
‚îú‚îÄ‚îÄ Tests (24 passing ‚úÖ)
‚îÇ   ‚îú‚îÄ‚îÄ test_merge_rich_attachments.py (11 tests) - Rich attachment validation
‚îÇ   ‚îú‚îÄ‚îÄ test_smoke.py - Basic functionality
‚îÇ   ‚îú‚îÄ‚îÄ test_gui_*.py (4 files) - GUI component tests
‚îÇ   ‚îî‚îÄ‚îÄ test_print_logging_bridge.py - Logging validation
‚îÇ
‚îú‚îÄ‚îÄ Utils (20+ tools üîç)
‚îÇ   ‚îú‚îÄ‚îÄ comprehensive_verification.py - Complete validation
‚îÇ   ‚îú‚îÄ‚îÄ verify_v120_fix.py - v1.2.0 field verification
‚îÇ   ‚îú‚îÄ‚îÄ check_common_schema_issues.py - Schema validation
‚îÇ   ‚îú‚îÄ‚îÄ strict_validator.py - osteele schema enforcement
‚îÇ   ‚îî‚îÄ‚îÄ (16+ more analysis scripts)
‚îÇ
‚îú‚îÄ‚îÄ Documentation (Complete üìö)
‚îÇ   ‚îú‚îÄ‚îÄ README.md (250 lines) - User guide
‚îÇ   ‚îú‚îÄ‚îÄ CHANGELOG.md (150 lines) - Version history
‚îÇ   ‚îú‚îÄ‚îÄ SUMMARY.md (this file)
‚îÇ   ‚îú‚îÄ‚îÄ LICENSE - MIT
‚îÇ   ‚îú‚îÄ‚îÄ SECURITY.md - Vulnerability reporting
‚îÇ   ‚îî‚îÄ‚îÄ .gitattributes - Line ending config
‚îÇ
‚îú‚îÄ‚îÄ GitHub Integration
‚îÇ   ‚îú‚îÄ‚îÄ workflows/ (ci.yml, release.yml)
‚îÇ   ‚îú‚îÄ‚îÄ ISSUE_TEMPLATE/ (bug_report, feature_request)
‚îÇ   ‚îú‚îÄ‚îÄ PULL_REQUEST_TEMPLATE.md
‚îÇ   ‚îî‚îÄ‚îÄ CONTRIBUTING.md
‚îÇ
‚îî‚îÄ‚îÄ Sample Data
    ‚îú‚îÄ‚îÄ conversations.example.json
    ‚îî‚îÄ‚îÄ projects.example.json
```

### Getting Started

**Quick Setup (Windows):**
```bat
cd C:\Dev\ClaudeExportFixer
scripts\windows\create_venv.bat
```

**Fix Export:**
```bat
python patch_conversations.py export.zip -o fixed.zip --zip-output --pretty
```

**Build Knowledge Base:**
```bat
python claude_knowledge_base.py export.zip my_kb.db
```

**Query Conversations:**
```bat
python claude_kb_query.py my_kb.db "power bi dax" --export results.html
```

**Generate Analytics:**
```bat
python claude_kb_analytics.py my_kb.db --dashboard analytics.html
```

**Run GUI:**
```bat
python patch_conversations.py --gui
```

### Current Status
- **Version**: 1.5.1 (Released 2025-10-28)
- **Status**: Production-ready with incremental updates and automatic file monitoring
- **Tests**: 38/38 passing ‚úÖ (14 new incremental tests)
- **License**: MIT
- **Real-World Validation**: 
  - ‚úÖ Tested on 401 conversations, 10,369 messages
  - ‚úÖ 100% schema compliance (all required fields)
  - ‚úÖ Rich metadata preserved (2,830 files with file_uuid + file_name)
  - ‚úÖ **Incremental updates**: 5-10 min (vs 60+ min) for typical monthly exports
  - ‚úÖ **Embedding reuse**: 95%+ for unchanged conversations
  - ‚úÖ Vector embeddings: 384D all-MiniLM-L6-v2 semantic search
  - ‚úÖ Analytics: 8 major features, HTML dashboards, code extraction

### Recent Changes (v1.5.1)

#### Added - Watchdog Service (MAJOR FEATURE)
- **Automatic File Monitoring**: `start_watchdog.py` monitors `01_input/` folder continuously
- **Drag-and-Drop Processing**: Files process automatically when dropped
- **Background Operation**: Runs as daemon service with `--daemon` flag
- **Knowledge Base Integration**: Optional auto-build with `--build-kb` flag
- **Incremental Updates**: Uses `--incremental` for 87-90% faster KB updates
- **Thread-Safe Processing**: Handles multiple files simultaneously
- **Real-Time Feedback**: Shows processing status and results
- **Windows Integration**: `scripts/windows/start_watchdog.bat` for easy launching
- **Dependency**: Added `watchdog>=2.1.0` to requirements.txt

#### Previous Changes (v1.5.0)

#### Added - Incremental Updates (MAJOR FEATURE)
- **Export Fixer Incremental Mode**: 80-90% time savings
  - `--incremental --previous FILE` flags
  - Change detection (timestamps + SHA256 hashing)
  - `--dry-run` for previewing changes
  - Smart merging of new/modified conversations
  
- **Knowledge Base Incremental Mode**: 87-90% time savings (5-10 min vs 60+ min)
  - **Embedding reuse** for unchanged conversations (95%+ reuse rate)
  - Auto-detects existing database
  - `processing_manifest` table tracks hashes, timestamps, model versions
  - `--show-changes` for dry run, `--force-rebuild` for full rebuild
  
- **Incremental Utils Module** (`incremental_utils.py`):
  - Content hashing with SHA256
  - Change detection (new/modified/unchanged/deleted)
  - Time estimation and progress reporting
  - Clock skew handling
  - 14+ utility tests

#### Previous Features (v1.4.0)
- **Analytics Suite**: 8 major features with HTML dashboards
- **Performance**: 40% faster KB builds with batch processing
- **HTML Export**: Beautiful styled output

#### Enhanced (v1.3.0)
- **Vector Embeddings**: Semantic search with sentence-transformers
- **Query Tool**: Interactive REPL with keyword/semantic/hybrid search
- **Export Formats**: Markdown, JSON, CSV, HTML

#### Previous Critical Fixes
- **Content Type Filtering**: Removed unsupported `token_budget` items (v1.2.2)
- **Schema Compliance**: All osteele viewer required fields (v1.2.0)
- **File Timestamps**: `created_at` on all file objects (v1.1.2)
- **Rich Attachments**: Metadata preservation with deduplication (v1.1.1)

### Known Limitations
- **osteele Viewer**: Some conversations may fail validation
  - All required schema fields present (100% compliance)
  - Most common issues now resolved (content filtering, file schema)
  - Remaining issues may be conversation-specific edge cases
- **Embedding Generation**: CPU-intensive (~20 min for 401 conversations)
  - Future: Optional GPU acceleration with CUDA/MPS
- **Analytics**: Currently CLI-only (no web dashboard yet)

### Roadmap

#### v1.5.0 (Future)
- [ ] GPU-accelerated embedding generation
- [ ] Web-based analytics dashboard (Flask/FastAPI)
- [ ] Conversation clustering with k-means
- [ ] Topic modeling with LDA/NMF
- [ ] Export to Power BI dataset format

#### v2.0.0 (Vision)
- [ ] Multi-user knowledge base (team collaboration)
- [ ] Real-time sync with Claude.ai
- [ ] Custom embedding models (domain-specific)
- [ ] Advanced visualizations (D3.js, Plotly)

### Maintainer Notes
- **CHANGELOG.md**: Update for every version with [Keep a Changelog](https://keepachangelog.com/) format
- **Tests**: Run `pytest -q` before committing (must be 100% passing)
- **Line Endings**: `.bat` files require CRLF (enforced by `.gitattributes`)
- **Dependencies**: Keep `requirements.txt` minimal (only runtime deps)
- **Utils**: All analysis tools go in `utils/` with clear naming
- **Grok Collaboration**: See `GROK_KNOWLEDGE_BASE_PROMPT.md` for AI enhancement guide
- **Security**: Report issues via SECURITY.md guidelines

### Integration Notes
- **C:\_chunker Project**: Knowledge base leverages enterprise chunking patterns
  - NLTK sentence tokenization
  - SQLite tracking database design
  - Parallel processing patterns (not yet implemented)
  - Tag extraction logic
- **osteele Viewer**: Source code at `claude-chat-viewer-main/` for schema reference
- **Real Data**: Sample 401-conversation export in OneDrive for testing

### Useful Commands
```bat
# Create virtual environment
scripts\windows\create_venv.bat

# Run all tests
scripts\windows\run_tests.bat

# Fix export for viewer
python patch_conversations.py export.zip -o fixed.zip --zip-output --pretty

# Build knowledge base
python claude_knowledge_base.py export.zip my_kb.db

# Query conversations
python claude_kb_query.py my_kb.db

# Generate analytics dashboard
python claude_kb_analytics.py my_kb.db --dashboard report.html

# Launch GUI
scripts\windows\run_gui.bat

# Build executables
scripts\windows\build_exe.bat        # CLI only
scripts\windows\build_exe_gui.bat    # GUI (no console)

# Verify v1.2.0 compliance
python utils\verify_v120_fix.py

# Run strict validation
python utils\strict_validator.py conversations.json
```

### Support & Contribution
- **Issues**: [GitHub Issues](https://github.com/racmac57/ClaudeExportFixer/issues)
- **Contributing**: See `.github/CONTRIBUTING.md`
- **Security**: See `SECURITY.md` for vulnerability reporting
- **License**: MIT (see `LICENSE`)

---

**Last Updated**: 2025-10-28 (v1.5.1)

```

```markdown
# Project Summary

## ClaudeExportFixer v1.5.2

### Purpose
**Complete toolkit for Claude conversation exports:** Fix, validate, search, and build knowledge bases from Claude.ai chat history. Ensures full compatibility with the osteele chat viewer while providing advanced analytics, semantic search, HTML dashboards, **incremental updates** (87-90% time savings), **automatic file monitoring**, and **multi-format processing** (`.md`, `.xlsx`, `.csv`, `.py`, `.txt`) for daily Power BI, Python, and ArcGIS workflows. ### Core Components

#### 1. Export Fixer (`patch_conversations.py`)
Normalizes Claude exports for osteele viewer compatibility:
- **Schema Compliance**: Adds all required fields (`content`, `model`, `index`, `model_slug`)
- **Rich Attachments**: Merges and preserves file metadata with `extracted_content`
- **Format Support**: Handles both list and dict conversation formats
- **ZIP Processing**: Streaming support for large exports with `ijson`
- **GUI Mode**: Optional Tkinter interface (`--gui` flag)

#### 2. Knowledge Base Builder (`claude_knowledge_base.py`)
Converts exports to searchable SQLite database:
- **Semantic Chunking**: NLTK sentence-aware chunking (150 words max)
- **Vector Embeddings**: 384D semantic search (sentence-transformers)
- **Auto-Tagging**: Tech keywords, date-based, content-type tags
- **Full-Text Search**: FTS5 indexing across all conversations
- **File Indexing**: Attachment `extracted_content` searchable
- **40% Performance Boost**: Batch processing optimizations (v1.2.0)

#### 3.