[IMPORT] arcpy
[IMPORT] os
[IMPORT] glob
[IMPORT] logging
[FROM IMPORT] from datetime import datetime, timedelta
[FROM IMPORT] from config import APR_PATH, SYM_LAYER_PATH, SUFFIXES
[FROM IMPORT] from PIL import Image, ImageDraw, ImageFont

[FUNCTION]: validate_config()
   [Description] Validate configuration parameters. Returns:
        bool: True if configuration is valid, F...

[FUNCTION]: sanitize_filename(text)
   [Description] Sanitize text for use in filenames. Args:
        text (str): Text to sanitize
        
   ...

[FUNCTION]: create_placeholder_image(crime_type, output_path)
   [Description] Create a placeholder image for crime types with 0 incidents in 7-day period. Args:
        ...

[FUNCTION]: export_maps(crime_type, output_folder, args)
   [Description] Export crime maps showing ONLY 7-Day incidents. Creates placeholder images for crime types with ...

[FUNCTION]: restore_layer_states(map_obj, original_states)
   [Description] Restore all layers to their original visibility and transparency states. Args:
        map_...

[FUNCTION]: build_sql_filter_7day(crime_type, start_date)
   [Description] Build SQL filter for 7-Day period based on crime type using config patterns. Args:
        ...

[FUNCTION]: build_sql_filter(crime_type, start_date)
   [Description] Legacy function - redirects to 7-day version for compatibility....

[FUNCTION]: apply_symbology(layer, layer_name)
   [Description] Apply symbology to a layer from a layer file. Args:
        layer: ArcPy layer object
     ...

[FUNCTION]: update_legend_visibility_7day(layout, map_obj, target_layer)
   [Description] Update legend to show only the 7-Day layer. Args:
        layout: ArcPy layout object
     ...

[FUNCTION]: update_legend_visibility(layout, map_obj, suffix_layers)
   [Description] Legacy function - redirects to 7-day version....

[FUNCTION]: cleanup_patch_elements(layout)
   [Description] Remove patch elements from layout. Args:
        layout: ArcPy layout object...

[FUNCTION]: export_map_to_png(layout, crime_type, output_folder)
   [Description] Export layout to PNG file. Args:
        layout: ArcPy layout object
        crime_type (st...
[VARIABLE]: issues
[VARIABLE]: sanitized
[VARIABLE]: aprx
[FROM IMPORT] from config import get_sql_pattern_for_crime
[VARIABLE]: base_conditions
[VARIABLE]: pattern
[VARIABLE]: sql_filter
[VARIABLE]: width
[VARIABLE]: height
[VARIABLE]: img
[VARIABLE]: draw
[VARIABLE]: title_text
[VARIABLE]: subtitle_text
[VARIABLE]: main_text
[VARIABLE]: title_bbox
[VARIABLE]: subtitle_bbox
[VARIABLE]: main_bbox
[VARIABLE]: title_width
[VARIABLE]: subtitle_width
[VARIABLE]: main_width
[VARIABLE]: title_x
[VARIABLE]: subtitle_x
[VARIABLE]: main_x
[VARIABLE]: title_y
[VARIABLE]: subtitle_y
[VARIABLE]: main_y
[VARIABLE]: border_color
[VARIABLE]: aprx
[VARIABLE]: layouts
[VARIABLE]: layout
[VARIABLE]: map_frames
[VARIABLE]: map_frame
[VARIABLE]: map_obj
[VARIABLE]: original_states
[VARIABLE]: layer_count
[VARIABLE]: base_layers
[VARIABLE]: base_layers_found
[VARIABLE]: layer_name
[VARIABLE]: target_layer
[VARIABLE]: success
[VARIABLE]: conditions
[VARIABLE]: crime_condition
[VARIABLE]: crime_condition
[VARIABLE]: sym_layer_file
[VARIABLE]: sym_layers
[VARIABLE]: sym_layer
[VARIABLE]: legend
[VARIABLE]: shown_count
[VARIABLE]: elements_to_remove
[VARIABLE]: sanitized_crime
[VARIABLE]: cleanup_pattern
[VARIABLE]: old_files
[VARIABLE]: removed_count
[VARIABLE]: export_filename
[VARIABLE]: export_path
[VARIABLE]: title_font
[VARIABLE]: subtitle_font
[VARIABLE]: text_font
[VARIABLE]: available_layouts
[VARIABLE]: today
[VARIABLE]: seven_days_ago
[VARIABLE]: export_filename
[VARIABLE]: export_path
[VARIABLE]: success
[VARIABLE]: filter_sql
[VARIABLE]: file_size
[VARIABLE]: target_layer
[VARIABLE]: legend
[VARIABLE]: title_font
[VARIABLE]: subtitle_font
[VARIABLE]: text_font
[VARIABLE]: feature_count
[VARIABLE]: title_font
[VARIABLE]: subtitle_font
[VARIABLE]: text_font
[VARIABLE]: export_filename
[VARIABLE]: export_path
[VARIABLE]: success